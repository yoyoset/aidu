@layer base, tokens, components, utilities;

@layer tokens {
  :root {
    /* --- Material Design 3 Palette (Core) --- */
    --md-sys-color-primary: #1e6b3f;
    /* Deep Green */
    --md-sys-color-on-primary: #ffffff;
    --md-sys-color-primary-container: #b3f2be;
    --md-sys-color-on-primary-container: #00210f;

    --md-sys-color-secondary: #526350;
    --md-sys-color-on-secondary: #ffffff;
    --md-sys-color-secondary-container: #d5e8cf;
    --md-sys-color-on-secondary-container: #101f10;

    --md-sys-color-surface: #f8f9fa;
    --md-sys-color-on-surface: #191c19;
    --md-sys-color-surface-variant: #dee5da;
    --md-sys-color-on-surface-variant: #424940;

    --md-sys-color-outline: #72796f;
    --md-sys-color-outline-variant: #c2c9bd;
    --md-sys-color-error: #ba1a1a;
    --md-sys-color-scrim: #000000;
    --md-sys-color-surface-container-low: #f0f4ef;
    --md-sys-color-primary-fixed-dim: #a2d2fb;

    /* --- Elevation System (M3 Levels) --- */
    --md-sys-elevation-0: none;
    --md-sys-elevation-1: 0px 1px 3px 1px rgba(0, 0, 0, 0.15), 0px 1px 2px 0px rgba(0, 0, 0, 0.3);
    --md-sys-elevation-2: 0px 2px 6px 2px rgba(0, 0, 0, 0.15), 0px 1px 2px 0px rgba(0, 0, 0, 0.3);
    --md-sys-elevation-3: 0px 4px 8px 3px rgba(0, 0, 0, 0.15), 0px 1px 3px 0px rgba(0, 0, 0, 0.3);

    /* --- State Layers (Opacity Overlays) --- */
    --md-sys-state-hover: rgba(0, 0, 0, 0.08);
    --md-sys-state-focus: rgba(0, 0, 0, 0.12);
    --md-sys-state-pressed: rgba(0, 0, 0, 0.12);

    /* --- Layout & Shape --- */
    --md-sys-radius-xs: 4px;
    --md-sys-radius-sm: 8px;
    --md-sys-radius-md: 12px;
    --md-sys-radius-lg: 16px;
    --md-sys-radius-xl: 28px;
    --md-sys-radius-pill: 9999px;
    /* Standard for FAB/Dialogs */

    /* --- Typography --- */
    --md-sys-font-sans: 'Inter', system-ui, -apple-system, sans-serif;

    /* --- Legacy Compatibility (Mapping) --- */
    --color-brand-primary: var(--md-sys-color-primary);
    --color-bg-body: var(--md-sys-color-surface);
    --color-text-main: var(--md-sys-color-on-surface);
    --radius-md: var(--md-sys-radius-md);
  }
}

@layer base {
  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    -webkit-tap-highlight-color: transparent;
  }

  body {
    font-family: var(--md-sys-font-sans);
    background-color: var(--md-sys-color-surface);
    color: var(--md-sys-color-on-surface);
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
    overflow-x: hidden;
  }

  /* Custom Scrollbar */
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background: var(--md-sys-color-outline);
    border-radius: 10px;
    opacity: 0.5;
  }
}

@layer components {

  /* --- M3 Standard Buttons --- */
  .md-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 0 24px;
    height: 40px;
    border-radius: 20px;
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 250ms cubic-bezier(0.4, 0, 0.2, 1);
    border: none;
    position: relative;
    overflow: hidden;
    user-select: none;
  }

  /* Target layer for interaction feedback */
  .md-btn::after {
    content: '';
    position: absolute;
    inset: 0;
    background: currentColor;
    opacity: 0;
    transition: opacity 250ms;
  }

  .md-btn:hover::after {
    opacity: 0.08;
  }

  .md-btn:active::after {
    opacity: 0.12;
  }

  .md-btn:active {
    transform: scale(0.98);
  }

  .md-btn-filled {
    background-color: var(--md-sys-color-primary);
    color: var(--md-sys-color-on-primary);
  }

  .md-btn-tonal {
    background-color: var(--md-sys-color-primary-container);
    color: var(--md-sys-color-on-primary-container);
  }

  .md-btn-outlined {
    background-color: transparent;
    border: 1px solid var(--md-sys-color-outline);
    color: var(--md-sys-color-primary);
  }

  .md-btn-ghost {
    background-color: transparent;
    color: var(--md-sys-color-primary);
    padding: 0 12px;
  }

  /* FAB-like Icon Button */
  .md-icon-btn {
    width: 40px;
    height: 40px;
    padding: 0;
    border-radius: 50%;
    margin: 0;
  }

  /* --- Material Cards --- */
  .md-card {
    background-color: white;
    border-radius: var(--md-sys-radius-md);
    padding: var(--md-sys-spacing-md, 16px);
    border: 1px solid var(--md-sys-color-surface-variant);
    transition: box-shadow 250ms;
  }

  .md-card-elevated {
    box-shadow: var(--md-sys-elevation-1);
    border: none;
  }

  .md-card-elevated:hover {
    box-shadow: var(--md-sys-elevation-2);
  }
}

@layer utilities {
  .hidden {
    display: none !important;
  }

  .elevation-1 {
    box-shadow: var(--md-sys-elevation-1);
  }

  .elevation-2 {
    box-shadow: var(--md-sys-elevation-2);
  }

  .elevation-3 {
    box-shadow: var(--md-sys-elevation-3);
  }

  .text-secondary {
    color: var(--md-sys-color-on-surface-variant);
  }

  .text-xs {
    font-size: 0.75rem;
  }

  .text-sm {
    font-size: 0.875rem;
  }
}